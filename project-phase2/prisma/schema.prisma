// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model User {
  userId          String           @id @default(cuid())
  username        String           @unique
  password        String
  email           String           @unique
  type            String           @default("CUSTOMER")
  name            String
  surname         String?
  companyName     String?
  moneyBalance    Decimal?         @default(0)
  shippingAddress ShippingAddress?
  bankAccount     BankAccount?
  Artworks        Artwork[]
  Purchases       Purchase[]
}

model Artwork {
  artworkNo   String     @id @default(cuid())
  title       String
  category    String
  medium      String
  year        Int
  price       Decimal
  quantity    Int
  description String
  available   Boolean    @default(true)
  image       Image?
  User        User?      @relation(fields: [artistId], references: [userId])
  artistId    String?
  Purchase    Purchase[]
}

model Image {
  imageId       String  @id @default(cuid())
  url           String
  alternate_url String
  artworkNo     String  @unique
  artwork       Artwork @relation(fields: [artworkNo], references: [artworkNo])
}

model BankAccount {
  accountNo String  @id @default(cuid())
  balance   Decimal @default(0)
  userId    String  @unique
  user      User    @relation(fields: [userId], references: [userId])
}

model Purchase {
  purchaseNo       String   @id @default(cuid())
  quantity         Int
  purchaseDate     DateTime @default(now())
  totalPrice       Decimal
  artworkNo        String   @unique
  artwork          Artwork  @relation(fields: [artworkNo], references: [artworkNo])
  customerId       String?
  User             User?    @relation(fields: [customerId], references: [userId])
}

model ShippingAddress {
  addressId   String @id @default(cuid())
  street      String
  zone        String
  houseNumber String
  customerId  String @unique
  user        User   @relation(fields: [customerId], references: [userId])
}
